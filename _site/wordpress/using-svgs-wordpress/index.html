<!DOCTYPE html> <html lang="en" xmlns="https://www.w3.org/1999/xhtml" xmlns:og="https://ogp.me/ns#" xmlns:fb="https://www.facebook.com/2008/fbml"> <head itemscope itemtype="http://schema.org/WebSite"> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"> <meta name="theme-color" content="#5CACC4"> <title itemprop="name">Using SVGs in WordPress | James Steinbach</title> <meta name="description" content="SVGs are basically the bomb-diggety for vector images on the web. They’re crisp and clean at any size or resolution, making them perfect for icons, line art,..."> <meta property="og:locale" content="en_US" /> <meta property="og:type" content="website" /> <meta property="og:title" content="Using SVGs in WordPress | James Steinbach" /> <meta property="og:description" content="SVGs are basically the bomb-diggety for vector images on the web. They’re crisp and clean at any size or resolution, making them perfect for icons, line art,..." /> <meta property="og:url" content="http://localhost:4000" /> <meta property="og:site_name" content="James Steinbach " /> <meta name="twitter:card" content="summary"/> <meta name="twitter:description" content="SVGs are basically the bomb-diggety for vector images on the web. They’re crisp and clean at any size or resolution, making them perfect for icons, line art,..."/> <meta name="twitter:title" content="Using SVGs in WordPress | James Steinbach"/> <meta name="twitter:domain" content="http://localhost:4000"/> <link rel="stylesheet" href="/css/main.css"> <link rel="canonical" href="http://localhost:4000/wordpress/using-svgs-wordpress/" itemprop="url"> <link rel="alternate" type="application/rss+xml" title="James Steinbach " href="http://localhost:4000/feed.xml" /> </head> <body> <header class="site-header" role="banner"> <div class="wrapper"> <a class="site-title" href="/">James Steinbach </a> <nav class="site-nav"> <a class="page-link" href="/css/">CSS</a> <a class="page-link" href="/sass/">Sass</a> <a class="page-link" href="/wordpress/">WP</a> <a class="page-link" href="/talks/">Talks</a> <a class="page-link" href="/about/">About</a> <a class="page-link" href="/contact/">Contact</a> </nav> </div> </header> <div class="page-content" id="main" role="main"> <div class="wrapper"> <div class="post"> <header class="post-header"> <h1 class="post-title">Using SVGs in WordPress</h1> <p class="post-meta"> <span class="date">Jun 24, 2014</span> <span class="author">James Steinbach</span> <span class="categories"> <a href="/wordpress" class="category-link">[WordPress]</a> </span> </p> </header> <article class="post-content"> <p>SVGs are basically the bomb-diggety for vector images on the web. They’re crisp and clean at any size or resolution, making them perfect for icons, line art, or other vector artwork. Unfortunately, using SVGs in WordPress is not supported by default. This post shows you how to fix three significant issues with using SVGs in WordPress: uploading SVGs, displaying SVGs in the Editor and custom fields, and inlining SVG code in a post or page template.</p> <h2 id="allowing-svgs-in-wordpress-uploader">Allowing SVGs in WordPress Uploader</h2> <p>WordPress, however, doesn’t allow you to upload SVGs. By default, it treats them as a security risk (I’d assume this has something to do with the possibility of executing code through SVG’s XML file format, but maybe someone can leave a more detailed answer in the comments…). Step one to using SVGs in WordPress is to give the Media Library Uploader permission to upload them. The following PHP snippet (pasted in your theme’s functions.php file) will do that:</p> <div class="language-php highlighter-rouge"><pre class="highlight"><code>function svg_mime_types( $mimes ) {
  $mimes['svg'] = 'image/svg+xml';
  return $mimes;}
add_filter( 'upload_mimes', 'svg_mime_types' );
</code></pre></div> <p>That snippet comes from <a title="CSS-Tricks: Allow SVG through WordPress Uploader" href="http://css-tricks.com/snippets/wordpress/allow-svg-through-wordpress-media-uploader/" target="_blank">CSS-Tricks.com</a>.</p> <h2 id="displaying-svgs-in-wordpress-dashboard">Displaying SVGs in WordPress Dashboard</h2> <div id="attachment_1251" style="width: 298px" class="wp-caption alignright"> <img class="size-medium wp-image-1251" src="/images/Screen-Shot-2014-06-23-at-4.00.54-PM-288x300.png" alt="Default display of SVGs in WordPress custom field" width="288" height="300" /> <p class="wp-caption-text">Whoops, this SVG is huge!</p> </div> <p>Now that you can successfully upload SVGs to your Media Library, you’re about to run into a pretty nasty display problem: the SVG is either too small or too big. If you put the SVG in the editor inline, you’ll end up with the default height/width attributes set to 1px × 1px: practically invisible. If, on the other hand, you’re using an SVG in a custom field, the image becomes huge, filling all the possible width of the column (and a proportional height). To fix this, we need to add some CSS to WordPress’s Dashboard. The following PHP snippet (again, added to functions.php) will accomplish that:</p> <div class="language-php highlighter-rouge"><pre class="highlight"><code>function svg_size() {
  echo '<span class="nt">&lt;style&gt;</span>
    <span class="nt">svg</span><span class="o">,</span> <span class="nt">img</span><span class="o">[</span><span class="nt">src</span><span class="o">*=</span><span class="s1">".svg"</span><span class="o">]</span> <span class="p">{</span>
      <span class="nl">max-width</span><span class="p">:</span> <span class="m">150px</span> <span class="cp">!important</span><span class="p">;</span>
      <span class="nl">max-height</span><span class="p">:</span> <span class="m">150px</span> <span class="cp">!important</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="nt">&lt;/style&gt;</span>';
}
add_action('admin_head', 'svg_size');
</code></pre></div> <p>What we just did was insert a small CSS declaration into every Dashboard page. The selector finds <code>&lt;svg&gt;</code> elements, as well as images with <code>.svg</code> in their src attribute. It then overrides their default attributes (1px × 1px in the Editor, no limits in a custom field) and fits them all into a 150px × 150px box.</p> <div id="attachment_1250" style="width: 1230px" class="wp-caption aligncenter"> <img class="size-full wp-image-1250" src="/images/Screen-Shot-2014-06-23-at-3.58.53-PM.png" alt="Improved display of SVGs in WordPress custom field" width="1220" height="230" /> <p class="wp-caption-text">Ah, this is much better!</p> </div> <p>Note: this is only a problem if you’re optimizing your SVGs with a tool that removes the height and width attributes. You should optimize, of course! Just be aware that if your optimizer removes height/width, you’ll need to use CSS to control the layout size of the SVG on the front-end as well as here in the Dashboard.</p> <h2 id="inlining-svgs-in-wordpress-themes">Inlining SVGs in WordPress Themes</h2> <p>Now let’s push a little farther. Let’s take a common SVG case use and solve another WordPress-related SVG issue. We’ll pretend for a moment that we’re building a website for a manufacturing company and we’re using a custom post type for each “step” in their process. Each step has an icon that’s an SVG, so we add a custom field for “Step Icon” to the post type. We want those icons to change color on hover, however. The normal dark blue color should become a medium gray. In order to transition colors on <code>:hover</code> with only CSS, we need to inline the SVG as XML in the page. Using <code>&lt;img src="image.svg"&gt;</code> or using an SVG background-image won’t allow us to control the colors with CSS. Assuming you’re using the <a title="Advanced Custom Fields WordPress Plugin" href="http://www.advancedcustomfields.com/" target="_blank">ACF plugin for your custom fields</a>, the following PHP snippet belongs in the template file you use for displaying process steps where you want to inline the SVG file:</p> <div class="language-php highlighter-rouge"><pre class="highlight"><code>if ( get_field( 'step_icon' ) ) {
  $icon = get_field( 'step_icon' );
  if ( strpos( $icon, '.svg' ) !== false ) {
    $icon = str_replace( site_url(), '', $icon);
    print '<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"step-icon"</span><span class="nt">&gt;</span>';
    include(ABSPATH . $icon);
    print '<span class="nt">&lt;/div&gt;</span>';
   }
}
</code></pre></div> <p>Of course, if you’re using a different plugin for your custom fields (Types, Pods, etc), you’ll need to change <code>get_field()</code> to whatever function that plugin provides (or use WP’s core <a title="WordPress Codex: get_post_meta()" href="http://codex.wordpress.org/Function_Reference/get_post_meta" target="_blank"><code>get_post_meta()</code></a> function). That snippet checks to make sure the image is really an SVG, then strips out the WP site_url text. (This is necessary because the <code>include()</code> function on a full http[s] url is a cross-site-scripting vulnerability.) The <code>include()</code> function prints the SVG as XML to your page’s source. The following CSS (or something similar) in your style.css will allow you to change the color on hover:</p> <div class="language-css highlighter-rouge"><pre class="highlight"><code><span class="nc">.step-icon</span> <span class="nt">svg</span> <span class="nt">path</span><span class="o">,</span>
<span class="nc">.step-icon</span> <span class="nt">svg</span> <span class="nt">polygon</span> <span class="p">{</span>
  <span class="py">fill</span><span class="p">:</span> <span class="m">#383b52</span><span class="p">;</span> <span class="c">/* Your color here. */</span>
<span class="p">}</span>
<span class="nc">.step-icon</span><span class="nd">:hover</span> <span class="nt">svg</span> <span class="nt">path</span><span class="o">,</span>
<span class="nc">.step-icon</span><span class="nd">:hover</span> <span class="nt">svg</span> <span class="nt">polygon</span> <span class="p">{</span>
  <span class="py">fill</span><span class="p">:</span> <span class="m">#444</span><span class="p">;</span> <span class="c">/* Your color here. */</span>
<span class="p">}</span>
</code></pre></div> <p>Now you should get this delightful hover effect:</p> <p><img class="alignright size-full wp-image-1254" src="/images/svg-hover.gif" alt="CSS Hover Effects for Inline SVGs in WordPress" width="301" height="200" /></p> <h2 id="conclusion">Conclusion</h2> <p>There you have it: three code snippets to allow you to (1) upload SVGs to your WordPress Media Library, (2) display those SVGs nicely in Dashboard, and (3) inline those SVGs in WordPress theme files. You’ll want to be aware that <a title="Can I Use: SVG" href="http://caniuse.com/svg" target="_blank">SVGs aren’t supported by IE8 and down</a>, so you’ll need to work out a fallback if a missing SVG image would create a usability or accessibility problem.</p> <p>If you’ve got questions or other great ideas for using SVGs in WordPress, please leave a comment!</p> </article> </div> </div> </div> <footer class="site-footer" role="contentinfo"> <div class="wrapper"> <!-- Begin MailChimp Signup Form --> <div id="mc_embed_signup"> <!-- Submit via Ajax: http://stackoverflow.com/a/16172798 --> <form action="//jamessteinbach.us7.list-manage.com/subscribe/post?u=e06400c5106eb26339f4a0aea&amp;id=35bef0e04e" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate> <div id="mc_embed_signup_scroll"> <h2>Get New Posts &amp; Other Content in Your Inbox!</h2> <div class="mc-fields"> <div class="indicates-required"><span class="asterisk">*</span> indicates required</div> <div class="mc-field-group email"> <label for="mce-EMAIL">Email Address<span class="asterisk">*</span></label> <input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL"> </div> <div class="mc-field-group fname"> <label for="mce-FNAME">First Name</label> <input type="text" value="" name="FNAME" class="" id="mce-FNAME"> </div> <div class="mc-field-group lname"> <label for="mce-LNAME">Last Name </label> <input type="text" value="" name="LNAME" class="" id="mce-LNAME"> </div> </div> <div id="mce-responses" class="clear"> <div class="response" id="mce-error-response" style="display:none"></div> <div class="response" id="mce-success-response" style="display:none"></div> </div> <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups--> <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_e06400c5106eb26339f4a0aea_35bef0e04e" tabindex="-1" value=""></div> <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button button-alt"> <p class="mc-ref">Powered by <a href="http://eepurl.com/AtwTT" title="MailChimp - email marketing made easy and fun">MailChimp</a></p> </div> </form> </div> <!--End mc_embed_signup--> </div> <div class="wrapper"> <div class="footer-col-wrapper"> <div class="footer-col footer-col-1"> <ul class="contact-list"> <li>James Steinbach</li> <li><a href="mailto:jdsteinbach@gmail.com">jdsteinbach@gmail.com</a></li> </ul> </div> <div class="footer-col footer-col-2"> <ul class="social-media-list"> <li> <a href="https://github.com/jdsteinbach"> <span class="icon icon--github"> <svg viewBox="0 0 16 16"> <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/> </svg> </span> <span class="username">jdsteinbach</span> </a> </li> <li> <a href="https://twitter.com/jdsteinbach"> <span class="icon icon--twitter"> <svg viewBox="0 0 16 16"> <path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809 c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/> </svg> </span> <span class="username">jdsteinbach</span> </a> </li> </ul> </div> <div class="footer-col footer-col-3"> <p class="text">Front-end architect. Speaker & writer.<br/>Sass, CSS animation, RWD &amp; WP. </p> </div> </div> </div> </footer> <script> if (window.localStorage) { if (localStorage.getItem('theme') === 'dark') { document.body.classList.add('theme-dark'); } else { document.body.classList.remove('theme-dark'); } } </script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-43397146-5', 'auto'); ga('send', 'pageview'); </script> <script async src="/js/site.js"></script> </body> </html>
